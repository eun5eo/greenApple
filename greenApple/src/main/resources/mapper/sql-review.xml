<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ga.greenApple.mapper.ReviewMapper">
	
	<!-- resultType은 dto의 alias와 일치해야한다 -->
	<select id="rvList" resultType="review">
		select * from review order by reviewNo desc
	</select>
	
	<insert id="rvInsert" parameterType="review">
		insert into review values( #{reviewNo}, #{id}, #{productCode}, 
			#{content}, #{fileName}, sysdate, 'n' )
	</insert>
	
	<insert id="insertRvPhoto" parameterType="reviewImg">
		insert into review_img values(review_image_seq.nextval,
			#{reviewNo}, #{id}, #{fileName} )
	</insert>
	
	<update id="rvUpdate">
		update review set content = #{content}
			<if test="fileName != null">
				, fileName = #{fileName}
			</if> 
			where reviewNo = #{reviewNo}
	</update>
	
	<update id="rvDelete" parameterType="string">
		update review set del = 'y' where reviewNo = #{reviewNo}
	</update>
	
</mapper>