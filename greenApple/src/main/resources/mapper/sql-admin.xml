<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ga.greenApple.mapper.AdminMapper">
	
	<!-- 상품 등록 -->
	<insert id="pdInsert" parameterType="product">
		insert into product values ( product_code_seq.nextval, #{thumbnail}, #{fileName}, 
			#{productName}, #{price}, #{productDescription}, #{origin}, #{seasonal}, 
			#{stock}, sysdate, 'n', 'n' )
	</insert>
	
	<!-- 상품 사진 등록 -->
	<insert id="insertphotos" parameterType="productImg">
		insert into product_img values ( product_img_seq.nextval, #{productCode}, 
			#{fileName} )
	</insert>
	
	<!-- 상품 수정 -->
	<update id="pdUpdate" parameterType="product">
		update product set thumbnail = #{thumbnail}, productName = #{productName}, 
			price = #{price}, productDescription = #{productDescription},
			origin = #{origin}, seasonal = #{seasonal}, stock = #{stock}
			<if test="fileName != null">
				, fileName = #{fileName}
			</if>
			where productCode = #{productCode}
	</update>
	
	<!-- 상품 삭제 -->
	<update id="pdDelete" parameterType="integer">
		update product set del = 'y' where productCode = #{productCode}
	</update>
	
	<!-- 상품 품절 -->
	<update id="productSoldOut" parameterType="integer">
		update product set soldOut = 'y' where productCode = #{productCode}
	</update>
	
	<!-- 회원 목록 -->
	<select id="memberList" resultType="member">
		select id, name, tel, joinDate, address1, address2, del from member
	</select>
	
	<!-- 회원 탈퇴 처리 -->
	<update id="memberDelete" parameterType="string">
		update member set del = 'y' where id = #{id}
	</update>
	
	<!-- 리뷰 목록 -->
	<select id="reviewList" resultType="review">
		select * from review
	</select>
	
	<!-- 리뷰 삭제 -->
	<update id="reviewDelete" parameterType="string">
		update review set del = 'y' where reviewId = #{reviewId}
	</update>
	
</mapper>